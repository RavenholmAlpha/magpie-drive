<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magpie Drive System</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- JSZip for Batch Download -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-crow"></i> MAGPIE_SYS
            </div>
            
            <!-- Search Bar -->
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="SEARCH_FILES..." autocomplete="off">
                <button id="searchBtn"><i class="fas fa-search"></i></button>
            </div>

            <div class="header-right">
                <div class="user-info" id="userInfo">
                    <span>IDLE...</span>
                </div>
                
                <!-- Common Toolbar -->
                <div id="commonToolbar" class="header-right">
                     <button id="batchDownloadBtn" title="Batch Download as ZIP">
                        <i class="fas fa-file-archive"></i> ZIP
                    </button>
                </div>

                <!-- Admin Toolbar -->
                <div id="adminToolbar" class="header-right hidden">
                    <button id="newDirBtn">
                        <i class="fas fa-folder-plus"></i> NEW
                    </button>
                    <button id="moveBtn">
                        <i class="fas fa-expand-arrows-alt"></i> MOVE
                    </button>
                    <button id="batchDeleteBtn" class="delete-btn">
                        <i class="fas fa-trash-alt"></i> DEL
                    </button>
                    <button id="uploadBtn" class="upload-btn">
                        <i class="fas fa-upload"></i> UP
                    </button>
                    <button id="uploadFolderBtn" class="upload-btn" title="Upload Folder">
                        <i class="fas fa-folder-open"></i> DIR
                    </button>
                </div>

                <button id="logoutBtn" class="logout-btn">
                    <i class="fas fa-power-off"></i> EXIT
                </button>
            </div>
            
            <input type="file" id="fileInput" multiple style="display: none">
            <input type="file" id="folderInput" webkitdirectory directory style="display: none">
        </header>

        <main>
            <div class="breadcrumb" id="breadcrumb">
                <!-- Generated by JS -->
            </div>

            <div class="file-list-header">
                <div class="col-select"><input type="checkbox" id="selectAll" class="file-checkbox"></div>
                <div class="col-icon">FMT</div>
                <div class="col-name">FILENAME</div>
                <div class="col-size">SIZE</div>
                <div class="col-date">MODIFIED</div>
                <div class="col-actions">CMD</div>
            </div>

            <div id="fileList" class="file-list">
                <!-- Generated by JS -->
                <div class="loading">INITIALIZING DATA STREAM...</div>
            </div>
        </main>
    </div>

    <!-- Drag Overlay -->
    <div id="dragOverlay" class="drag-overlay hidden">
        <div class="drag-content">
            <i class="fas fa-cloud-upload-alt"></i>
            <h2>INITIATE DATA TRANSFER</h2>
            <p>RELEASE TO UPLOAD</p>
        </div>
    </div>

    <!-- Upload Progress -->
    <div id="uploadProgressContainer" class="upload-progress-container hidden">
        <h3>DATA UPLINK ACTIVE</h3>
        <div id="progressList"></div>
    </div>

    <!-- Custom Modal System -->
    <div id="modalOverlay" class="modal-overlay hidden">
        <div class="modal-box">
            <div class="modal-header">
                <i class="fas fa-terminal"></i> <span id="modalTitle">SYSTEM_MESSAGE</span>
            </div>
            <div class="modal-body" id="modalMessage">
                <!-- Message goes here -->
            </div>
            <div class="modal-input-container hidden" id="modalInputContainer">
                <input type="text" id="modalInput" class="modal-input" autocomplete="off">
            </div>
            <div class="modal-footer">
                <button id="modalCancelBtn" class="modal-btn cancel hidden">ABORT</button>
                <button id="modalOkBtn" class="modal-btn confirm">EXECUTE</button>
            </div>
        </div>
    </div>

    <!-- File Viewer/Editor Overlay -->
    <div id="viewerOverlay" class="viewer-overlay hidden">
        <div class="viewer-window">
            <div class="viewer-header">
                <div class="viewer-title"><i class="fas fa-eye"></i> <span id="viewerFilename">FILENAME.EXT</span></div>
                <div class="viewer-controls">
                    <button id="viewerDownloadBtn" class="action-btn">DOWNLOAD</button>
                    <button id="viewerCloseBtn" class="delete-btn">CLOSE</button>
                </div>
            </div>
            <div class="viewer-body" id="viewerBody">
                <!-- Content injected here -->
            </div>
            <div class="viewer-footer hidden" id="viewerFooter">
                <button id="viewerSaveBtn" class="upload-btn">SAVE CHANGES</button>
            </div>
        </div>
    </div>

    <script src="script.js?v=2.0"></script>
</body>
</html>